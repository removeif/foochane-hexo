---
title: MySQL常用操作记录
summary: 关键词：MySQL基本命令 用户创建 授权 删除 表操作 MySQL无法远程访问问题解决
date: 2019-06-24 13:27:28
urlname: 2019062401
categories: 大数据
tags:
  - 大数据
  - mysql
img: /medias/featureimages/23.jpg
author: foochane
toc: true
mathjax: false
top: false
cover: false
---

<!-- 
文章作者：[foochane](https://foochane.cn/) 
</br>
原文链接：[https://foochane.cn/article/2019062401.html](https://foochane.cn/article/2019062401.html)  
-->

>MySQL基本命令 用户创建 授权 删除 表操作 MySQL无法远程访问问题解决


## 1 查看数据库当前用户及权限

```sql
use mysql; #信息放在mysql.user表下
desc users;
select host,user from mysql.user;
```

## 2 创建用户
命令:

```sql
CREATE USER 'username'@'host' IDENTIFIED BY 'password';

```

说明：
- `username`：你将创建的用户名
- host：指定该用户在哪个主机上可以登陆，如果是本地用户可用localhost，如果想让该用户可以从任意远程主机登陆，可以使用通配符%
- `password`：该用户的登陆密码，密码可以为空，如果为空则该用户可以不需要密码登陆服务器

如：
```sql
CREATE USER 'test'@'%' IDENTIFIED BY '123456'

```

## 3 用户授权
命令:
```sql
GRANT privileges ON databasename.tablename TO 'username'@'host'

```

说明:
- `privileges`：用户的操作权限，如`SELECT`，`INSERT`，`UPDATE`等，如果要授予所的权限则使用`ALL`
- `databasename`：数据库名
- `tablename`：表名，如果要授予该用户对所有数据库和表的相应操作权限则可用*表示，如*.*

例子:
```sql
GRANT SELECT, INSERT ON test_database.test_table TO 'testuser'@'%';
GRANT ALL ON test_database.* TO 'testuser'@'%';
GRANT ALL ON *.* TO 'testuser'@'%';
```

注意:

用以上命令授权的用户不能给其它用户授权，如果想让该用户可以授权，用以下命令:
```sql
GRANT privileges ON databasename.tablename TO 'username'@'host' WITH GRANT OPTION;

```

## 4 撤销用户权限
命令:
```sql
REVOKE privilege ON databasename.tablename FROM 'username'@'host';

```

说明:
说明:
- `privileges`：用户的操作权限，如`SELECT`，`INSERT`，`UPDATE`等，如果要授予所的权限则使用ALL
- `databasename`：数据库名
- `tablename`：表名，如果要授予该用户对所有数据库和表的相应操作权限则可用`*`表示，如`*.*`

例子:
```sql
REVOKE ALL ON *.* FROM 'testuser'@'%';

```

## 5 删除用户
命令:
```sql
DROP USER 'username'@'host';

```

## 6 设置与更改用户密码
命令:
```sql
SET PASSWORD FOR 'username'@'host' = PASSWORD('newpassword');

```

如果是当前登陆用户用:
```sql
SET PASSWORD = PASSWORD("newpassword");

```

## 7 查看当前登录用户,当前数据库

```sql
select user();

select database();

```
注意这里 `uer()`,`database()`不是语句，是函数。


## 8 创建表删除表
创建：
```sql
create database databasename;
create database if not exists databasename;

```

删除：
```sql
drop database databasename;

```


## 9 mysql启动停止查看状态
```sql
 service mysql status
 service mysql start
 service mysql stop
 service mysql restart
 ```
 
 
## 10 mysql无法远程访问问题解决

1 查看配置文件，看是否只允许本地访问

配置文件具体位置 `/etc/mysql/mysql.conf.d/mysqld.cnf`

不同版本可能不一样。

如有如下内容，把它注释掉：
```sql
#bind-address           = 127.0.0.1

```

2 防火墙问题

查看端口占用情况：
```shell
netstat -nalp | grep "3306"

```

关闭防火墙
```shell
sudo ufw status
sudo ufw disable

```

3 mysql用户没有授权
```sql
CREATE USER 'hiveuser'@'%' IDENTIFIED BY '123456';
grant all privileges on *.* to 'hiveuser'@'%' identified by '123456' with grant option; 
flush privileges;
create database metastore;

```

